# 運用手順書

## ドキュメント情報

| 項目 | 内容 |
|------|------|
| ドキュメントID | MT002-{YYYYMMDD} |
| プロジェクト名 | {プロジェクト名} |
| 作成日 | {YYYY/MM/DD} |
| 作成者 | {作成者名} |
| 版数 | {1.0} |

## 変更履歴

| 版数 | 日付 | 変更者 | 変更内容 |
|------|------|--------|----------|
| 1.0 | {YYYY/MM/DD} | {変更者名} | 新規作成 |

---

## 日次運用手順

### 朝の確認作業 (09:00)

#### システムヘルスチェック

| No | 確認項目 | 確認方法 | 正常値 | 完了 |
|----|----------|----------|--------|------|
| 1 | サービス稼働状況 | `systemctl status app` | active(running) | {□} |
| 2 | ディスク使用率 | `df -h` | 70%以下 | {□} |
| 3 | メモリ使用率 | `free -h` | 80%以下 | {□} |
| 4 | プロセス確認 | `ps aux \| grep app` | 正常起動 | {□} |

#### ログ確認

```bash
# エラーログ確認
tail -n 100 /var/log/app/error.log

# 異常なエラーがないことを確認
grep -i "critical\|fatal" /var/log/app/error.log
```

### 夕方の確認作業 (18:00)

#### バックアップ確認

| No | 確認項目 | 確認方法 | 完了 |
|----|----------|----------|------|
| 1 | バックアップ実行確認 | ログ確認 | {□} |
| 2 | バックアップファイル存在確認 | `ls -lh /backup/` | {□} |
| 3 | バックアップサイズ確認 | 前回と比較 | {□} |

---

## 週次運用手順

### 日曜メンテナンス (02:00)

#### フルバックアップ

```bash
# データベースバックアップ
pg_dump -U postgres -d mydb > /backup/full_backup_$(date +%Y%m%d).sql

# ファイルバックアップ
tar -czf /backup/files_$(date +%Y%m%d).tar.gz /var/www/app

# バックアップ確認
ls -lh /backup/
```

---

## 月次運用手順

### 第1日曜メンテナンス (02:00)

#### システムアップデート

```bash
# パッケージ更新
sudo apt update
sudo apt upgrade -y

# 再起動
sudo reboot
```

#### 月次レポート作成

- [ ] 稼働率集計
- [ ] 障害発生件数集計
- [ ] リソース使用状況グラフ作成
- [ ] レポート提出

---

## 承認記録

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| {作成者} | {氏名} | {YYYY/MM/DD} | {署名} |
