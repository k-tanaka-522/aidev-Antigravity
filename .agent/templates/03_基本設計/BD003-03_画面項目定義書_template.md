# 画面項目定義書

## ドキュメント情報

| 項目 | 内容 |
|------|------|
| ドキュメントID | BD003-03 |
| ドキュメント名 | 画面項目定義書 |
| システム名 | {システム名} |
| サブシステム名 | {サブシステム名} |
| 版数 | {版数} |
| ステータス | {作成中/レビュー中/承認済み} |
| 作成日 | {YYYY/MM/DD} |
| 作成者 | {作成者名} |
| 承認日 | {YYYY/MM/DD} |
| 承認者 | {承認者名} |

## 変更履歴

| 版数 | 変更日 | 変更者 | 変更内容 | 承認者 |
|------|--------|--------|----------|--------|
| 1.0 | {YYYY/MM/DD} | {変更者名} | 新規作成 | {承認者名} |
| {版数} | {YYYY/MM/DD} | {変更者名} | {変更内容} | {承認者名} |

## 目次

1. [概要](#概要)
2. [画面項目定義](#画面項目定義)
3. [バリデーション仕様](#バリデーション仕様)
4. [共通項目定義](#共通項目定義)

---

## 概要

### 目的

{この画面項目定義書の目的を記述}

### 適用範囲

{この画面項目定義書が適用される範囲を記述}

### データ型定義

| データ型 | 説明 | 形式 | 例 |
|----------|------|------|-----|
| String | 文字列 | 任意の文字列 | "サンプルテキスト" |
| Number | 数値 | 整数または小数 | 123, 123.45 |
| Integer | 整数 | 整数のみ | 123 |
| Decimal | 小数 | 小数点を含む数値 | 123.45 |
| Boolean | 真偽値 | true/false | true |
| Date | 日付 | YYYY-MM-DD | 2024-01-01 |
| DateTime | 日時 | YYYY-MM-DD HH:mm:ss | 2024-01-01 12:00:00 |
| Email | メールアドレス | RFC5322準拠 | user@example.com |
| URL | URL | http/https形式 | https://example.com |
| Tel | 電話番号 | ハイフンあり/なし | 03-1234-5678 |
| PostalCode | 郵便番号 | 7桁（ハイフンあり/なし） | 123-4567 |

---

## 画面項目定義

### 画面項目定義テンプレート

各画面について以下の形式で項目を定義します。

---

#### 画面ID: {SCR-XXX}

##### 画面基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | {SCR-XXX} |
| 画面名 | {画面名} |
| 関連機能ID | {F-XX-YY-ZZ} |
| 関連API | {API-XXX} |

##### 画面項目一覧

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| {項目ID} | {項目名} | {physical_name} | {型} | {桁数} | {○/×} | {初期値} | {入力/表示/両方} | {UI部品ID} | {テーブル.カラム} | {V-XXX} | {備考} |

---

### SCR-001: ログイン画面

##### 画面基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-001 |
| 画面名 | ログイン画面 |
| 関連機能ID | F-01-01-01 |
| 関連API | API-001 POST /api/v1/auth/login |

##### 画面項目一覧

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F001-01 | メールアドレス | email | Email | 255 | ○ | - | 入力 | UI-010 | users.email | V-001, V-010 | |
| F001-02 | パスワード | password | String | 128 | ○ | - | 入力 | UI-011 | users.password_hash | V-002, V-011 | ハッシュ化して送信 |
| F001-03 | ログイン状態を保持 | remember_me | Boolean | - | × | false | 入力 | UI-020 | - | - | チェックボックス |
| F001-04 | エラーメッセージ | error_message | String | - | × | - | 表示 | - | - | - | 認証失敗時に表示 |

##### 項目詳細

###### F001-01: メールアドレス

| 項目 | 内容 |
|------|------|
| 項目ID | F001-01 |
| 項目名（日本語） | メールアドレス |
| 項目名（英語） | Email Address |
| 物理名 | email |
| データ型 | Email |
| 最大桁数 | 255 |
| 必須 | ○ |
| 初期値 | - |
| プレースホルダー | "example@example.com" |
| ラベル | "メールアドレス" |
| ヘルプテキスト | "登録済みのメールアドレスを入力してください" |
| 入力/表示 | 入力 |
| UI部品 | UI-010（テキスト入力欄） |
| バリデーション | V-001（必須入力）, V-010（メールアドレス形式） |
| エラーメッセージ | "メールアドレスを入力してください", "正しいメールアドレス形式で入力してください" |
| 関連DB項目 | users.email |

###### F001-02: パスワード

| 項目 | 内容 |
|------|------|
| 項目ID | F001-02 |
| 項目名（日本語） | パスワード |
| 項目名（英語） | Password |
| 物理名 | password |
| データ型 | String |
| 最大桁数 | 128 |
| 必須 | ○ |
| 初期値 | - |
| プレースホルダー | "パスワードを入力" |
| ラベル | "パスワード" |
| ヘルプテキスト | - |
| 入力/表示 | 入力 |
| UI部品 | UI-011（パスワード入力欄） |
| バリデーション | V-002（必須入力）, V-011（パスワード形式） |
| エラーメッセージ | "パスワードを入力してください", "8文字以上で入力してください" |
| 関連DB項目 | users.password_hash |
| 備考 | 表示/非表示トグルボタン付き |

---

### SCR-010: ユーザー登録画面

##### 画面基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-010 |
| 画面名 | ユーザー登録画面 |
| 関連機能ID | F-01-02-01 |
| 関連API | API-010 POST /api/v1/users/register |

##### 画面項目一覧

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F010-01 | 姓 | last_name | String | 50 | ○ | - | 入力 | UI-010 | users.last_name | V-001, V-020 | |
| F010-02 | 名 | first_name | String | 50 | ○ | - | 入力 | UI-010 | users.first_name | V-001, V-020 | |
| F010-03 | メールアドレス | email | Email | 255 | ○ | - | 入力 | UI-010 | users.email | V-001, V-010, V-021 | 重複チェックあり |
| F010-04 | パスワード | password | String | 128 | ○ | - | 入力 | UI-011 | users.password_hash | V-001, V-012 | 強度チェックあり |
| F010-05 | パスワード（確認） | password_confirm | String | 128 | ○ | - | 入力 | UI-011 | - | V-001, V-013 | パスワードと一致確認 |
| F010-06 | 利用規約同意 | terms_accepted | Boolean | - | ○ | false | 入力 | UI-020 | users.terms_accepted_at | V-014 | チェック必須 |
| F010-07 | プライバシーポリシー同意 | privacy_accepted | Boolean | - | ○ | false | 入力 | UI-020 | users.privacy_accepted_at | V-014 | チェック必須 |

---

### SCR-100: 商品一覧画面

##### 画面基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-100 |
| 画面名 | 商品一覧画面 |
| 関連機能ID | F-02-01-01 |
| 関連API | API-100 GET /api/v1/products |

##### 画面項目一覧（検索条件）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F100-S01 | 検索キーワード | search_keyword | String | 100 | × | - | 入力 | UI-010 | - | - | 部分一致検索 |
| F100-S02 | カテゴリ | category_id | Integer | - | × | 全て | 入力 | UI-060 | products.category_id | - | プルダウン選択 |
| F100-S03 | 状態 | status | String | - | × | 全て | 入力 | UI-060 | products.status | - | 複数選択可 |
| F100-S04 | 価格（下限） | price_min | Decimal | 10,2 | × | - | 入力 | UI-010 | - | V-030 | 数値のみ |
| F100-S05 | 価格（上限） | price_max | Decimal | 10,2 | × | - | 入力 | UI-010 | - | V-030, V-031 | 数値、下限以上 |
| F100-S06 | 在庫あり | in_stock_only | Boolean | - | × | false | 入力 | UI-020 | - | - | |

##### 画面項目一覧（一覧表示）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F100-L01 | 商品ID | product_id | String | 20 | - | - | 表示 | - | products.product_id | - | |
| F100-L02 | 商品名 | product_name | String | 200 | - | - | 表示 | - | products.product_name | - | リンク表示 |
| F100-L03 | カテゴリ | category_name | String | 100 | - | - | 表示 | - | categories.category_name | - | |
| F100-L04 | 価格 | price | Decimal | 10,2 | - | - | 表示 | - | products.price | - | カンマ区切り、円表示 |
| F100-L05 | 在庫数 | stock_quantity | Integer | - | - | - | 表示 | - | products.stock_quantity | - | |
| F100-L06 | ステータス | status | String | 20 | - | - | 表示 | - | products.status | - | バッジ表示 |
| F100-L07 | 登録日 | created_at | DateTime | - | - | - | 表示 | - | products.created_at | - | YYYY/MM/DD形式 |
| F100-L08 | 操作 | actions | - | - | - | - | 表示 | UI-041 | - | - | 詳細ボタン |

##### 画面項目一覧（ページング）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F100-P01 | ページ番号 | page | Integer | - | × | 1 | 入力 | UI-080 | - | V-040 | 1以上 |
| F100-P02 | 1ページ表示件数 | per_page | Integer | - | × | 20 | 入力 | UI-060 | - | V-041 | 10/20/50/100 |
| F100-P03 | 総件数 | total_count | Integer | - | - | - | 表示 | - | - | - | |
| F100-P04 | 総ページ数 | total_pages | Integer | - | - | - | 表示 | - | - | - | |

---

### SCR-202: 注文登録画面

##### 画面基本情報

| 項目 | 内容 |
|------|------|
| 画面ID | SCR-202 |
| 画面名 | 注文登録画面 |
| 関連機能ID | F-03-01-03 |
| 関連API | API-202 POST /api/v1/orders |

##### 画面項目一覧（配送先情報）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F202-D01 | 姓 | shipping_last_name | String | 50 | ○ | - | 入力 | UI-010 | orders.shipping_last_name | V-001, V-020 | |
| F202-D02 | 名 | shipping_first_name | String | 50 | ○ | - | 入力 | UI-010 | orders.shipping_first_name | V-001, V-020 | |
| F202-D03 | 郵便番号 | shipping_postal_code | PostalCode | 8 | ○ | - | 入力 | UI-010 | orders.shipping_postal_code | V-001, V-050 | 住所検索ボタン付き |
| F202-D04 | 都道府県 | shipping_prefecture | String | 10 | ○ | - | 入力 | UI-060 | orders.shipping_prefecture | V-001 | セレクトボックス |
| F202-D05 | 市区町村 | shipping_city | String | 100 | ○ | - | 入力 | UI-010 | orders.shipping_city | V-001, V-051 | |
| F202-D06 | 番地・建物名 | shipping_address | String | 200 | ○ | - | 入力 | UI-010 | orders.shipping_address | V-001, V-051 | |
| F202-D07 | 電話番号 | shipping_phone | Tel | 15 | ○ | - | 入力 | UI-010 | orders.shipping_phone | V-001, V-052 | |

##### 画面項目一覧（支払方法）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F202-P01 | 支払方法 | payment_method | String | 20 | ○ | - | 入力 | UI-021 | orders.payment_method | V-001 | ラジオボタン |
| F202-P02 | クレジットカード番号 | card_number | String | 16 | △ | - | 入力 | UI-010 | - | V-060 | 支払方法=カードの場合必須 |
| F202-P03 | カード有効期限（月） | card_expiry_month | String | 2 | △ | - | 入力 | UI-060 | - | V-061 | 支払方法=カードの場合必須 |
| F202-P04 | カード有効期限（年） | card_expiry_year | String | 4 | △ | - | 入力 | UI-060 | - | V-061 | 支払方法=カードの場合必須 |
| F202-P05 | セキュリティコード | card_cvv | String | 4 | △ | - | 入力 | UI-011 | - | V-062 | 支払方法=カードの場合必須 |

##### 画面項目一覧（注文内容）

| 項目ID | 項目名 | 物理名 | 型 | 桁数 | 必須 | 初期値 | 入力/表示 | UI部品 | DB項目 | バリデーションID | 備考 |
|--------|--------|--------|-----|------|------|--------|-----------|--------|--------|------------------|------|
| F202-O01 | 商品一覧 | order_items | Array | - | - | - | 表示 | - | order_items | - | 複数行 |
| F202-O02 | 小計 | subtotal | Decimal | 10,2 | - | - | 表示 | - | - | - | 自動計算 |
| F202-O03 | 送料 | shipping_fee | Decimal | 10,2 | - | - | 表示 | - | orders.shipping_fee | - | 自動計算 |
| F202-O04 | 消費税 | tax | Decimal | 10,2 | - | - | 表示 | - | orders.tax | - | 自動計算 |
| F202-O05 | 合計金額 | total_amount | Decimal | 10,2 | - | - | 表示 | - | orders.total_amount | - | 自動計算 |

---

## バリデーション仕様

### バリデーション一覧

| バリデーションID | バリデーション名 | 説明 | エラーメッセージ |
|------------------|------------------|------|------------------|
| V-001 | 必須入力 | 入力必須項目のチェック | "{項目名}を入力してください" |
| V-002 | 必須入力（パスワード） | パスワード必須入力 | "パスワードを入力してください" |
| V-010 | メールアドレス形式 | RFC5322準拠のメールアドレス形式 | "正しいメールアドレス形式で入力してください" |
| V-011 | パスワード形式（ログイン） | 8文字以上 | "8文字以上で入力してください" |
| V-012 | パスワード形式（登録） | 8文字以上、英大文字小文字数字記号各1文字以上 | "8文字以上で、英大文字、英小文字、数字、記号をそれぞれ1文字以上含めてください" |
| V-013 | パスワード一致確認 | パスワードとパスワード（確認）の一致確認 | "パスワードが一致しません" |
| V-014 | チェックボックス必須 | チェックボックスのチェック必須 | "{項目名}に同意してください" |
| V-020 | 全角文字 | 全角文字のみ | "全角文字で入力してください" |
| V-021 | メールアドレス重複チェック | データベースに登録済みでないこと | "このメールアドレスは既に登録されています" |
| V-030 | 数値 | 数値のみ | "数値で入力してください" |
| V-031 | 数値範囲（下限以上） | 下限値以上の数値 | "{下限値}以上の数値を入力してください" |
| V-040 | 正の整数 | 1以上の整数 | "1以上の整数を入力してください" |
| V-041 | 選択肢 | 指定された選択肢のいずれか | "有効な値を選択してください" |
| V-050 | 郵便番号形式 | 7桁の数値（ハイフンあり/なし） | "正しい郵便番号形式で入力してください（例: 123-4567）" |
| V-051 | 住所形式 | 全角文字、数字、ハイフン | "正しい住所形式で入力してください" |
| V-052 | 電話番号形式 | 10-11桁の数値（ハイフンあり/なし） | "正しい電話番号形式で入力してください（例: 03-1234-5678）" |
| V-060 | クレジットカード番号 | Luhnアルゴリズムによる検証 | "正しいクレジットカード番号を入力してください" |
| V-061 | カード有効期限 | 現在日付以降 | "有効期限が過去の日付です" |
| V-062 | セキュリティコード | 3-4桁の数値 | "正しいセキュリティコードを入力してください" |

### バリデーション詳細

#### V-001: 必須入力

| 項目 | 内容 |
|------|------|
| バリデーションID | V-001 |
| バリデーション名 | 必須入力 |
| チェックタイミング | フォーカスアウト時、送信時 |
| チェック内容 | 値が空でないこと（空白のみも不可） |
| エラーメッセージ | "{項目名}を入力してください" |
| 実装例（JavaScript） | `value.trim() === '' ? エラー : OK` |

#### V-010: メールアドレス形式

| 項目 | 内容 |
|------|------|
| バリデーションID | V-010 |
| バリデーション名 | メールアドレス形式 |
| チェックタイミング | フォーカスアウト時、送信時 |
| チェック内容 | RFC5322準拠のメールアドレス形式 |
| エラーメッセージ | "正しいメールアドレス形式で入力してください" |
| 実装例（正規表現） | `/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/` |

#### V-012: パスワード形式（登録）

| 項目 | 内容 |
|------|------|
| バリデーションID | V-012 |
| バリデーション名 | パスワード形式（登録） |
| チェックタイミング | 入力中（リアルタイム）、送信時 |
| チェック内容 | 8文字以上、英大文字、英小文字、数字、記号各1文字以上 |
| エラーメッセージ | "8文字以上で、英大文字、英小文字、数字、記号をそれぞれ1文字以上含めてください" |
| 実装例（正規表現） | 長さ: `length >= 8`<br/>大文字: `/[A-Z]/`<br/>小文字: `/[a-z]/`<br/>数字: `/[0-9]/`<br/>記号: `/[!@#$%^&*(),.?":{}|<>]/` |
| パスワード強度表示 | 弱/中/強の3段階で表示 |

#### V-050: 郵便番号形式

| 項目 | 内容 |
|------|------|
| バリデーションID | V-050 |
| バリデーション名 | 郵便番号形式 |
| チェックタイミング | フォーカスアウト時、送信時 |
| チェック内容 | 7桁の数値（ハイフンあり/なし） |
| エラーメッセージ | "正しい郵便番号形式で入力してください（例: 123-4567）" |
| 実装例（正規表現） | `/^\d{3}-?\d{4}$/` |
| 自動フォーマット | 7桁入力時に自動でハイフン挿入 |

---

## 共通項目定義

### 共通入力項目

以下の項目は複数画面で共通して使用される項目です。

#### C-001: メールアドレス

| 項目 | 内容 |
|------|------|
| 項目ID | C-001 |
| 項目名 | メールアドレス |
| 物理名 | email |
| データ型 | Email |
| 最大桁数 | 255 |
| 必須 | ○ |
| バリデーション | V-001, V-010 |
| 使用画面 | SCR-001, SCR-010, SCR-301 |

#### C-002: パスワード

| 項目 | 内容 |
|------|------|
| 項目ID | C-002 |
| 項目名 | パスワード |
| 物理名 | password |
| データ型 | String |
| 最大桁数 | 128 |
| 必須 | ○ |
| バリデーション | V-001, V-011（ログイン）/ V-012（登録） |
| 使用画面 | SCR-001, SCR-010, SCR-302 |

#### C-010: 氏名（姓）

| 項目 | 内容 |
|------|------|
| 項目ID | C-010 |
| 項目名 | 姓 |
| 物理名 | last_name |
| データ型 | String |
| 最大桁数 | 50 |
| 必須 | ○ |
| バリデーション | V-001, V-020 |
| 使用画面 | SCR-010, SCR-202, SCR-301 |

#### C-011: 氏名（名）

| 項目 | 内容 |
|------|------|
| 項目ID | C-011 |
| 項目名 | 名 |
| 物理名 | first_name |
| データ型 | String |
| 最大桁数 | 50 |
| 必須 | ○ |
| バリデーション | V-001, V-020 |
| 使用画面 | SCR-010, SCR-202, SCR-301 |

#### C-020: 郵便番号

| 項目 | 内容 |
|------|------|
| 項目ID | C-020 |
| 項目名 | 郵便番号 |
| 物理名 | postal_code |
| データ型 | PostalCode |
| 最大桁数 | 8 |
| 必須 | ○ |
| バリデーション | V-001, V-050 |
| 使用画面 | SCR-202, SCR-301 |
| 備考 | 住所検索機能付き |

#### C-021: 都道府県

| 項目 | 内容 |
|------|------|
| 項目ID | C-021 |
| 項目名 | 都道府県 |
| 物理名 | prefecture |
| データ型 | String |
| 最大桁数 | 10 |
| 必須 | ○ |
| バリデーション | V-001 |
| 選択肢 | 北海道, 青森県, ..., 沖縄県（47都道府県） |
| 使用画面 | SCR-202, SCR-301 |

---

## 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| 作成者 | {作成者名} | {YYYY/MM/DD} | |
| レビュー担当者 | {レビュー担当者名} | {YYYY/MM/DD} | |
| 承認者 | {承認者名} | {YYYY/MM/DD} | |

---

## 参照

### 関連ドキュメント

- [画面遷移図] BD003-01_画面遷移図
- [画面レイアウト] BD003-02_画面レイアウト
- [テーブル定義書] BD006-03_テーブル定義書
- [外部インターフェース設計書] BD005_外部インターフェース設計書

### 外部参照

- {参照先タイトル}: {URL}
