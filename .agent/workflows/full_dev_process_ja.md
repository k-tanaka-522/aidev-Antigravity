# 🚀 開発プロセス全体像 (Enterprise Model) with Strict Mode

## 📖 はじめに (Overview)

本ドキュメントは、プロジェクトの立ち上げからリリースまでの一連の流れ（ワークフロー）を定義したものです。
PMエージェントが進行役（オーケストレーター）となり、各専門エージェントと連携してプロジェクトを推進します。ユーザー（あなた）は、要所での「承認」と「意思決定」をお願いします。

**本プロセスの狙い:**
1.  **手戻りの防止:** 「動くもの」を確認してから次に進むことで、後半での大きな手戻りを防ぎます。
2.  **スピードと品質の両立:** 設計や実装を並行して進める（パラレルワーク）ことで、期間を短縮します。
3.  **納得感のある開発:** ブラックボックス化せず、進捗と成果物を常に見える化します。

## 🗺️ 全体フロー図

```mermaid
graph TD
    User((発注者)) -->|プロジェクト開始| PM[PM: 進行管理]
    PM -->|Phase 1| Planning[要件定義・計画]
    
    subgraph Phase1 [Phase 1: 定義・計画]
        Planning --> SysCon[要件ヒアリング]
        SysCon --> UIUX[UI/UXラフ設計]
        UIUX --> Plan[WBS・スケジュール作成]
    end

    Plan -->|Phase 2| Design[基本設計 (並行稼働)]

    subgraph Phase2 [Phase 2: 設計・方式策定]
        Design --> AppArch[アプリ機能設計]
        Design --> InfraArch[インフラ方式設計]
        AppArch & InfraArch --> SecCheck[セキュリティチェック]
    end

    SecCheck -->|Phase 3| Implem[製造・実装]

    subgraph Phase3 [Phase 3: 製造・実装 (並行稼働)]
        Implem --> BackDev[バックエンド製造]
        Implem --> FrontDev[フロントエンド製造]
    end

    BackDev & FrontDev -->|Phase 4| Verify[テスト・検証]

    subgraph Phase4 [Phase 4: 品質保証]
        Verify --> BrowserQA[ブラウザ自動操作テスト]
        BrowserQA --> Approval{ユーザー検収}
    end

    Approval -->|OK| Release[本番リリース]
    Approval -->|NG| Fix[改修・修正] --> Implem
```

---

## 🛡️ 品質基準 (Quality Standards)

エージェントは以下の基準を遵守し、プロフェッショナルとして恥ずかしくない成果物を作成してください。

1.  **具体性を持たせる (No Ambiguity)**
    *   「良きに計らう」「後で決める」といった曖昧な記述は禁止です。
    *   具体的な数値、パラメータ、固有名詞を使って記述してください。

2.  **省略時は理由を明記 (Explicit N/A)**
    *   テンプレートの項目が不要な場合は、勝手に消さず「N/A (対象外)」とし、その理由を一言（例：「新規構築のため移行データなし」）添えてください。

3.  **プロジェクト規模への適応 (Adaptive)**
    *   POC（概念実証）ならスピード優先、エンタープライズなら堅牢性優先など、文脈に合わせて記述の濃淡を調整してください。ただし、アーキテクチャやセキュリティに関する記述は常に詳細である必要があります。

---

## 👥 プロジェクト体制 (Team Structure)

| 役割 (Role) | 担当エージェント (Persona & File Path) | 主な責任 |
| :--- | :--- | :--- |
| **PM / 進行管理** | **PM Agent**<br>(Default / System Prompt) | 全体スケジュール管理、課題管理、ユーザー折衝 |
| **コンサルタント** | **System Consultant**<br>`[.agent/personas/consultant.md]` | 業務要件の整理、実現性評価 |
| **デザイナー** | **UI/UX Designer**<br>`[.agent/personas/designer.md]` | ユーザー体験設計、ワイヤーフレーム作成 |
| **アプリ・アーキテクト** | **App Architect**<br>`[.agent/personas/app-architect.md]` | 機能要件定義、API設計、DB設計 |
| **インフラ・アーキテクト** | **Infra Architect**<br>`[.agent/personas/infra-architect.md]` | クラウド構成策定、ネットワーク設計 |
| **セキュリティ担当** | **Security**<br>(兼任: Infra/App Architect) | セキュリティ要件定義、リスク評価 |
| **PG / 実装担当** | **Coder (Back/Front)**<br>`[.agent/personas/coder.md]` | プログラミング、単体テスト実装 |
| **QA / 品質管理** | **QA Agent**<br>`[.agent/personas/qa.md]` | テスト計画、E2Eテスト実施、品質判断 |
| **SRE / 運用担当** | **SRE**<br>`[.agent/personas/sre.md]` | デプロイ作業、環境構築 |

---

## Phase 1: 定義・計画 (Definition & Planning)

**📌 フェーズ概要:**
何を作るのか（Scope）、いつまでに作るのか（Schedule）、どう進めるのか（Plan）を合意します。

### 1.1 要件定義・実現性検討
*   **担当:** コンサルタント
*   **インプット:** ユーザーからの要望、ビジネスゴール
*   **使用テンプレート:** `.agent/templates/02_要件定義書テンプレート.md`
*   **アクション:** 
    *   テンプレートを読み込み、プロジェクトに合わせてカスタマイズします。
    *   曖昧な要望を具体的な機能要件に落とし込みます。
*   **成果物:** `docs/01_要件定義/要件定義書.md`

### 1.2 プロジェクト計画策定
*   **担当:** PM
*   **インプット:** 要件定義書
*   **使用テンプレート:** `.agent/templates/01_プロジェクトマネジメント計画書テンプレート.md`
*   **アクション:**
    *   タスクを洗い出し（WBS）、スケジュールを引きます。
    *   並行して進められる作業（デザインとAPI設計など）を見極めます。
*   **成果物:** `project_plan/schedule.md`, `task.md`

### 1.3 UI/UX・画面設計
*   **担当:** デザイナー
*   **アクション:**
    *   主要な画面遷移（ユーザーストーリー）を描きます。
    *   画面イメージ（ワイヤーフレーム）を作成します。
*   **成果物:** `design/wireframes.png`、`design/user_stories.md`

---

## Phase 2: 設計・方式策定 (Design)

**📌 フェーズ概要:**
実装（プログラミング）に入る前に、システムの中身（アーキテクチャ）を詳細に設計します。

### 2.1 アプリケーション基本設計
*   **担当:** アプリ・アーキテクト
*   **インプット:** 要件定義書、画面設計
*   **技術標準:** `.agent/standards/tech/41_app/api_design.md`
*   **使用テンプレート:** `.agent/templates/04_基本設計書テンプレート.md`
*   **アクション:**
    *   機能ごとの処理フロー、API仕様、データベース構造（ER図）を設計します。
*   **成果物:** `docs/02_基本設計/基本設計書.md`

### 2.2 インフラ構成設計
*   **担当:** インフラ・アーキテクト
*   **アクション:**
    *   AWS/クラウドの構成図を描き、ネットワークやセキュリティグループを設計します。
    *   CI/CD（自動デプロイ）の仕組みを検討します。
*   **成果物:** `docs/02_基本設計/インフラ構成書.md`

### 2.3 セキュリティチェック (設計レビュー)
*   **担当:** セキュリティ担当
*   **アクション:**
    *   設計書をレビューし、セキュリティリスク（脆弱性）がないかチェックします。
*   **成果物:** `security/controls_checklist.md`

---

## Phase 3: 製造・実装 (Implementation)

**📌 フェーズ概要:**
設計書をもとに、実際にプログラムコードを記述します。

### 3.1 バックエンド実装
*   **担当:** PG (Backend)
*   **インプット:** 基本設計書
*   **アクション:**
    *   APIの実装、DB接続処理、ビジネスロジックを作成します。
    *   単体テストコードを書き、動作を確認します。
*   **成果物:** `src/backend/**/*.py`

### 3.2 フロントエンド実装
*   **担当:** PG (Frontend)
*   **インプット:** 画面設計、基本設計書
*   **アクション:**
    *   画面（UI）の実装、API連携処理を作成します。
*   **成果物:** `src/frontend/**/*.tsx`

---

## Phase 4: 品質保証・リリース (Verification & Release)

**📌 フェーズ概要:**
完成したシステムが正しく動くか検証し、本番環境へリリースします。

### 4.1 ブラウザ自動テスト (E2E検証)
*   **担当:** QA
*   **ツール:** `browser_subagent`
*   **アクション:**
    *   実際にブラウザを起動し、ユーザーと同じ操作を自動で行います。
    *   **操作の様子を録画**し、証拠として保存します。
*   **成果物:** テスト実施レポート、**検証動画**

### 4.2 ユーザー検収 (リリース承認)
*   **担当:** QA -> PM
*   **アクション:**
    *   ユーザー（あなた）に検証動画とテスト結果を提示します。
    *   リリースの承認（Goサイン）をもらいます。
*   **成果物:** `qa/release_approval.md`

### 4.3 本番リリース
*   **担当:** SRE
*   **条件:** ユーザー検収完了
*   **アクション:**
    *   本番環境へデプロイし、最終確認（スモークテスト）を行います。
*   **成果物:** `deployment_status.md`
