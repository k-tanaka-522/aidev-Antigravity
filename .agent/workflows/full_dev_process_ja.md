# 🚀 開発ライフサイクル全体オーケストレーション (Enterprise Model)

## 🎯 上位目標 (High-Level Goal)
ユーザーとの対話を通じて「真に求められている価値」を特定し、その価値を最大化するソフトウェアシステムを構築する。
**ミッションコントロール (Mission Control)** モデルにより、複数の専門エージェントが並列して自律的にタスクを遂行し、厳格な検証ゲート（Verification Gate）を通過した成果物のみをリリースする。

## 👥 参加エージェント (Agents Involved)
* **PMエージェント (Mission Control):** プロジェクトマネージャー。タスク管理と並列フローの指揮。
* **システムコンサルタントエージェント:** 初期要件分析。
* **UI/UXデザイナーエージェント:** ユーザーフロー、ワイヤーフレーム作成。
* **アプリケーションアーキテクトエージェント:** コンポーネント設計。
* **インフラアーキテクトエージェント:** クラウドインフラおよびCI/CD計画。
* **セキュリティエージェント:** 脆弱性特定。
* **コーダーエージェント (バックエンド / フロントエンド):** ソースコードおよび単体テスト実装。
* **QAエージェント (検証):** **Browser Agent** を使用した視覚的E2Eテスト。
* **SREエージェント:** 監視設定および本番デプロイ。

---

## フェーズ 1: 定義と計画 (Definition & Planning)

### 1.1 初期要件定義と実現可能性調査
* **アクター:** システムコンサルタントエージェント
* **インプット:** ユーザーからの高レベルなビジネス目標。
* **テンプレート:** `.agent/templates/02_要件定義書テンプレート.md`
* **タスク:** 実現可能性を分析し、テンプレートを用いて中核となるビジネス要件を明確化する。
* **アウトプット:** `requirements/initial_spec.md`

### 1.2 プロジェクト計画策定 (ミッション初期化)
* **アクター:** PMエージェント
* **インプット:** `requirements/initial_spec.md`
* **テンプレート:** `.agent/templates/01_プロジェクトマネジメント計画書テンプレート.md`
* **タスク:** WBS、スケジュールに加え、**並列実行可能なタスク**（例：デザインとAPI設計）を識別する。
* **アウトプット:** `project_plan/schedule.md`, `task.md` (更新)

### 1.3 ユーザー体験設計
* **アクター:** UI/UXデザイナーエージェント
* **タスク:** ユーザーフローを定義し、ワイヤーフレームを作成。
* **アウトプット:** `design/wireframes.png`、`design/user_stories.md`

---

## フェーズ 2: 設計と基盤構築 (Parallel Design Tracks)
*注: 2.1と2.2は依存関係がない限り並列で実行可能*

### 2.1 アプリケーション設計トラック
* **アクター:** アプリケーションアーキテクトエージェント
* **インプット:** `design/user_stories.md`
* **技術標準:** `.agent/standards/tech/41_app/api_design.md`
* **タスク:** マイクロサービス/コンポーネントの設計、API定義。
* **アウトプット:** `architecture/app_design.md`

### 2.2 インフラストラクチャ設計トラック
* **アクター:** インフラアーキテクトエージェント
* **ガイド:** `.agent/guides/2.3_設計フェーズ/2.3.8_インフラ設計パターン選定.md`
* **タスク:** クラウドインフラ、ネットワーク、CI/CDパイプライン設計。
* **アウトプット:** `infrastructure/tf_plan.md`

### 2.3 セキュリティ監査 (設計ゲート)
* **アクター:** セキュリティエージェント
* **タイミング:** 2.1 および 2.2 の完了後。
* **タスク:** 設計段階でのセキュリティリスク分析。
* **アウトプット:** `security/controls_checklist.md`

---

## フェーズ 3: 実装 (Parallel Implementation Tracks)

### 3.1 バックエンド実装
* **アクター:** コーダーエージェント (バックエンド)
* **インプット:** `architecture/app_design.md`
* **タスク:** APIロジック、DB接続、単体テストの実装。
* **検証:** `run_command` によるテスト通過確認。
* **アウトプット:** `src/backend/**/*.py`

### 3.2 フロントエンド実装
* **アクター:** コーダーエージェント (フロントエンド)
* **インプット:** `design/user_stories.md`, `architecture/app_design.md`
* **タスク:** UIコンポーネント、画面遷移の実装。
* **アウトプット:** `src/frontend/**/*.tsx`

---

## フェーズ 4: 検証とデプロイ (Trust but Verify)

### 4.1 自動ブラウザ検証 (Auto-Verification)
* **アクター:** QAエージェント
* **スキル:** `.agent/skills/browser_verification.md`
* **ツール:** `browser_subagent`
* **タスク:**
    1.  アプリケーションを起動する。
    2.  `design/user_stories.md` に基づく重要シナリオをブラウザで実行する。
    3.  **操作の録画**とスクリーンショットを取得する。
* **アウトプット:** `test_reports/browser_verification_log.md`, **動画アーティファクト**

### 4.2 最終品質保証とリリース承認
* **アクター:** QAエージェント
* **インプット:** ブラウザ検証動画、単体テスト結果、セキュリティチェックリスト。
* **タスク:** 人間（ユーザー）に対し、**動画を提示して**承認を求める。
* **アウトプット:** `qa/release_approval.md`

### 4.3 本番デプロイ
* **アクター:** SREエージェント
* **条件:** `qa/release_approval.md` が承認済みであること。
* **タスク:** 本番展開とスモークテスト。
* **アウトプット:** `deployment_status.md`

